# 開発全体計画(全体要件定義)<!-- omit in toc -->
## 概要<!-- omit in toc -->
WebやITに関わるエンジニア向けの診断アプリ「ITエンジニア性格診断」に関するドキュメント。

ドキュメントは基本的にmdまたはgoogleスプレッドシートで作成。

## サイトURL<!-- omit in toc -->

https://www.10typesengineer.net/

## 開発に関するドキュメント<!-- omit in toc -->
- [フロントエンド開発](#)
    - [フロントエンド設計メモ](frontend/README.md)
    - [機能一覧表](frontend/front_functions.md)
- [バックエンド開発](#)
    - [バックエンド設計メモ](api/README.md)
    - [API設計書](api/api_arch.html)
    - [DB設計書](api/db_arch.md)
    - [ER図](api/diagram/ER.md)

## 目次<!-- omit in toc -->
- [1. 開発するアプリに関して](#1-開発するアプリに関して)
- [2. アプリ開発の際に行った調査に関して](#2-アプリ開発の際に行った調査に関して)
  - [2.1. 他の診断アプリの調査](#21-他の診断アプリの調査)
  - [2.2. エンジニアタイプを定義するために行った調査](#22-エンジニアタイプを定義するために行った調査)
- [2. 要件定義](#2-要件定義)
  - [2.1. 技術選定](#21-技術選定)
    - [2022/5 における技術選定](#20225-における技術選定)
    - [2022/12 における技術選定](#202212-における技術選定)
    - [今後の技術的な実装妄想](#今後の技術的な実装妄想)
- [3. 履歴](#3-履歴)


# 1. 開発するアプリに関して
Web や IT に関わるエンジニア向けの「性格診断アプリ」。

アプリを作った背景は以下の通りです。]

* 「面白そうだったから」(個人的な理由)
* 「私自身が個人開発界隈で身を隠していてITエンジニアを知らなかったため、WebやIT業界全体としてはどういうエンジニアが多いのかの調査や研究もアプリの制作過程でできると思った」(個人的な理由)
* エンジニア向けの診断アプリが私が知ってる限りこれまで存在しなかった
* 「SPA構成」が診断アプリに適していると思った

# 2. アプリ開発の際に行った調査に関して
## 2.1. 他の診断アプリの調査
以下のWebアプリを使用技術、サイト構成含めて調査。

### 1. 無料性格診断テスト - 16Personalities<!-- omit in toc -->
https://www.16personalities.com/ja/%E6%80%A7%E6%A0%BC%E8%A8%BA%E6%96%AD%E3%83%86%E3%82%B9%E3%83%88

* MBTIに基づく性格診断アプリ
* 多言語対応(51の言語)

#### 技術構成<!-- omit in toc -->
| 構成 | 技術名 |
| ---- | ---- |
| フロントエンド | Vue.js |
| バックエンド　| Laravel, PHP |
| クラウド | GCP |

#### アプリケーション設計を見た私の推測<!-- omit in toc -->
* 検索エンジンに引っかかるため Vue.jsはLaravelにバンドルして使っている可能性がある(SEO対策されている)
* 上記が正しい場合アプリの構成は「モノリシックサービス」である
* バックエンド機能があると言うことはDBにデータを読み隠している、つまり診断結果はサーバサイドに送信されている

#### 2. データでわかる辛口性格診断 - produced by JMR生活総合研究所<!-- omit in toc -->
https://www.jmrlsi.co.jp/cgi-bin/ego/diagform.pl

* 日本のウェブサイト
* 典型的なwebの診断アプリ

#### 技術構成<!-- omit in toc -->
| 構成 | 技術名 |
| ---- | ---- |
| フロントエンド | 独自CSS、独自JavaScript |
| バックエンド　| PHP |
| クラウド | 不明 |

> 補足: ミドルウェアにApacheを使用, サイト拡張子が「.pl」であるためPerlを使用している可能性あり

#### アプリケーション設計を見た私の推測<!-- omit in toc -->
* IaaSやPaaSがサイト解析ツール「Wappalyzer」で引っかからなかったため、インフラに使用しているサーバはオンプレ、またはVPSサーバを使用している可能性が高い

* サイト構成技術はレガシー(2000年代)

### 3. 超精密性格診断テスト mgram（エムグラム） | あなたの8性格を無料診断<!-- omit in toc -->
https://mgram.me/ja/

* エニアグラムに基づく性格診断アプリ
* サイト構成は比較的モダン

#### 技術構成<!-- omit in toc -->
| 構成 | 技術名 |
| ---- | ---- |
| フロントエンド | React |
| バックエンド　| Rails / Ruby |
| クラウド | GCP |

> 補足: JQueryを使用している

アプリケーション設計を見た私の推測
* F12でコードを解析するとReactが出て比較的初期または中期に作られた可能性あるコードにようだったため、サイトが作られたのは2014~2015年ごろだと推測
* 「var」を使用しているのでサイト開発者は「ES2015」以前のJSを使用している

## 2.2. エンジニアタイプを定義するために行った調査
以下の方法をとった。

* Youtubeで情報発信しているエンジニア/情報発信内容の調査/研究
* Qiita/Zennなどの技術記事の投稿内容と発信者Twitterの調査
* 私の個人開発界隈の知り合いや友人を分析
* Twitetrのフリーランス系エンジニアを調査

など

# 2. 要件定義
各場所の詳細な設計に関するメモは「開発に関するドキュメント」を参考。

## 2.1. 技術選定
### 2022/5 における技術選定
#### フロントエンド<!-- omit in toc -->
React, JavaScript

> 理由: 調査の結果と技術の特徴からSPA構成がサイトと相性がいいと思った

#### バックエンド<!-- omit in toc -->
Rails

> 理由: 私自身が初めて触るMVCフレームワークとしてRailsを使用したかった

#### クラウド<!-- omit in toc -->
Paasである、NetlifyとHerokuを採用

> 理由: サイトの運営にドメイン代以外掛けたくなかった、AWSはまだEC2しか触っていない&Web系のミドルウェアの設定をEC2で行ったことがないなど学習コストを考えて決定、自動CI/CDもあるし..

#### その他補足<!-- omit in toc -->
* GitHubリポジトリからの自動CI/CDでデプロイ。
* SSL/TSL化はもちろん対応。
* ドメインはムームドメインで購入。

### 2022/12 における技術選定
Herokuの有料化に伴い、以前構築したバックエンドサーバを削除。

そのためバックエンドサーバに関して再開発する必要となった。
#### フロントエンド<!-- omit in toc -->
とりあえず現状維持。

#### バックエンド<!-- omit in toc -->
現状維持

#### クラウド<!-- omit in toc -->
バックエンドのクラウドはFly.ioを採用。

フロントエンドのNetlifyはそのままで。**今は**

#### その他補足<!-- omit in toc -->
* HerokuでのRailsで使っていたCronによるRakeタスクが使用不可になった
* Fly.ioはCronは使えない。そのため定期実行したい処理はSidekiq&Redis(NoSQL)を使用する必要あり
* 学習/実装のための時間が増大することが見込まれる

### 今後の技術的な実装妄想
やれたらいいなぁ。というか将来的にできるようにする。

* フロントエンドをNext.jsに移したい(SSR可能、サーバ機能あり(バックエンドサーバを隠せる)、SEO対策しやすいため)

* TypeScriptへの移行

* PaaSの卒業(PaaSごとの勝手を覚えるのがめんどう)

* AWS(ECSなど)、Terraform、Dockerを使用してインフラも全部管理したい

# 3. 履歴
2022/01/19 : 設計に関するドキュメントをスプレッドシートから当資料に移行
