# Git＆Github入門<!-- omit in toc -->

## 目次<!-- omit in toc -->

- [1. Gitとは](#1-gitとは)
  - [1.1. リポジトリ(Repository)](#11-リポジトリrepository)
  - [1.2. コミット(Commit)](#12-コミットcommit)
  - [1.3. プッシュ(Push)](#13-プッシュpush)
  - [1.4. プル(Pull)](#14-プルpull)
  - [1.5. クローン(Clone)](#15-クローンclone)
  - [1.6. ブランチ(Branch)](#16-ブランチbranch)
  - [1.7. マージ(Merge)](#17-マージmerge)
  - [1.8. フェッチ(Fetch)](#18-フェッチfetch)
- [2. Git\&GitHubの使い方](#2-gitgithubの使い方)
  - [2.1. ローカルリポジトリにおける作業フロー(Git)](#21-ローカルリポジトリにおける作業フローgit)
    - [2.1.1. GitへのGitHubアカウントへの設定](#211-gitへのgithubアカウントへの設定)
    - [2.1.2. ローカルリポジトリの作成](#212-ローカルリポジトリの作成)
    - [2.1.3. ローカルリポジトリでのGitフロー](#213-ローカルリポジトリでのgitフロー)
    - [2.1.4. ブランチの切り方と切り替え方](#214-ブランチの切り方と切り替え方)
    - [2.1.5. リポジトリの状態の確認](#215-リポジトリの状態の確認)
    - [2.1.6. コミットした履歴の確認](#216-コミットした履歴の確認)
    - [2.1.7. ファイルの削除とステージングエリアへの追加](#217-ファイルの削除とステージングエリアへの追加)
    - [2.1.8. ファイルの変更差分の確認](#218-ファイルの変更差分の確認)
    - [2.1.9. ファイルの状態を直前のバージョンに戻す](#219-ファイルの状態を直前のバージョンに戻す)
    - [2.1.10. ファイルを古いバージョンに戻す](#2110-ファイルを古いバージョンに戻す)
  - [2.2. リモートリポジトリを含めた作業フロー(GitHub)](#22-リモートリポジトリを含めた作業フローgithub)
    - [2.2.1. リモートリポジトリの作成](#221-リモートリポジトリの作成)
    - [2.2.2. リモートリポジトリへのプッシュ](#222-リモートリポジトリへのプッシュ)
    - [2.2.3. リモートリポジトリからプル(ローカルへの反映)](#223-リモートリポジトリからプルローカルへの反映)
    - [2.2.4. リモートリポジトリの確認と変更(上書き)方法](#224-リモートリポジトリの確認と変更上書き方法)
    - [2.2.5. リモートリポジトリの削除](#225-リモートリポジトリの削除)
    - [2.2.6. リモートリポジトリからのクローン](#226-リモートリポジトリからのクローン)
  - [2.3. その他のGitコマンド](#23-その他のgitコマンド)
- [3. .gitignoreに関して](#3-gitignoreに関して)


## 参考資料<!-- omit in toc -->
| 名称 | URL |
| ---- | ---- |
| git-scm | https://git-scm.com/docs |

---
## 1. Gitとは
Gitは分散型のバージョン管理システムの1つです。
ファイルのバージョン管理が簡単にできるツールといえます。
また以下のような特徴がGitにはあります。
* 古いバージョンに簡単に戻せる
* 新旧のファイルを一元管理できる
* 編集した履歴を複数人で共有できる
* 複数人で修正した部分を一つに統合できる

### 1.1. リポジトリ(Repository)
リポジトリとは、ファイルやディレクトリを入れて保存しておく貯蔵庫のことです。
Gitにおけるリポジトリは以下の2種類に分かれています。
* **リモートリポジトリ(共有リポジトリ)** ・・・ 特定のサーバー上に設置して複数人で共有するためのリポジトリ
* **ローカルリポジトリ(個人リポジトリ)** ・・・ ユーザーごとに配置される手元のマシンで編集できるリポジトリ

2種類のリポジトリに分けることで、普段の作業はそれぞれのユーザーが手元のローカルリポジトリで行い、作業内容を共有するときにリモートリポジトリで公開するという使い方になります。
リモートリポジトリを介して他のユーザーの作業内容を把握することも可能です。


### 1.2. コミット(Commit)
コミットは、ファイルやディレクトリの編集作業をローカルリポジトリに記録するために必要な操作のこと。
コミットを実行するとファイルを編集した日時を記録したファイルが生成されます。
コミットを実行するごとにファイルが生成され、時系列順にならんで格納されるので、ファイルを編集した履歴やその内容を確認することができるわけです。


### 1.3. プッシュ(Push)
プッシュとは、ローカルリポジトリにあるファイルをリモートリポジトリに送信して保存する機能です。
共有リポジトリへの反映が行われるため、アップロードともいえるでしょう。
**クローンと異なるのはローカルリポジトリとの差分のみをダウンロードして更新する点です**


### 1.4. プル(Pull)
プルとは、共有されているリモートリポジトリに保存されているファイルの内、ローカルリポジトリ（あなたのローカル環境）に無いファイルや他のユーザーが更新したファイルのみをダウンロードする機能です。
ようするにリモートリポジトリの内容を同期させるとも言えます。


### 1.5. クローン(Clone)
クローンとは、ダウンロードに近いものものです。
複数人で共有しているファイル（リモートリポジトリ）をまるごと自分のローカル環境（ローカルリポジトリ）に保存する機能です。
まったく新規で開発の共有を始める場合に最初に行う作業といえます。


### 1.6. ブランチ(Branch)
ブランチとは、ファイルの編集履歴を分岐させて記録していく機能のことです。
WEBサービスやソフトウェアの開発において、バグの修正や、機能の追加などのファイル編集作業は複数のユーザーが同時に行うことも少なくありません。
並行して同時に行われる作業を正確に管理するためにGitにはブランチという機能が用意されています。これがGitのバージョン管理を効率的にし、間違いを減らすためにもっとも活かされている機能ともいえます。

例として**マスターブランチ**であるメインのブランチと、そこから分岐してバグの修正や、機能の追加を行っているブランチを記すと以下のようになります
<img src="https://tcd-theme.com/wp-content/uploads/2019/12/branch-e1577097792246.png" width="80%">


### 1.7. マージ(Merge)
複数のブランチを一つにまとめて、完成形に近づけることをマージと呼びます。
ブランチの図で言うとバグの修正や、機能の追加を行ったブランチがマスターブランチに統合されている部分のことです。


### 1.8. フェッチ(Fetch)
リモートリポジトリからファイルの最新情報を取得してくる操作のことです。共有されているファイル（リモートリポジトリ）の更新を確認したり、複数人の作業の擦り合わせのために使う機能といえます。
**プルと異なる点はローカルのファイルを更新することはないことです。**
**複数人で同じファイルを編集しているときでもお互い干渉しないようにするための機能と言えます。**


## 2. Git&GitHubの使い方
### 2.1. ローカルリポジトリにおける作業フロー(Git)
#### 2.1.1. GitへのGitHubアカウントへの設定
Git BashまたはターミナルへのGitHubのアカウントの登録は以下のコマンドで行います。
```git
git config --global user.name GitHub登録ユーザ名
git config --global user.email Github登録メールアドレス
```
GitHub登録ユーザ名とGithub登録メールアドレスは各自用意したものを代入してください。
またGitBashやターミナルへGitHubへのユーザ情報を登録できたかどうかの確認は以下のコマンドで行います。
```git
git config --list
```

#### 2.1.2. ローカルリポジトリの作成
Git管理したいフォルダに「cdコマンド」で移動します。
その後、リポジトリの新規作成は以下コマンドで行います。
これを行うことでローカルリポジトリが作成できます。
.gitファイルが作成されます。
```bash
git init
```


#### 2.1.3. ローカルリポジトリでのGitフロー
ステージングエリアへのファイル追加は以下のコマンドで行います。

> ``git add``コマンドでは内容を変更したファイルをステージングエリアに追加します

```bash
git add ファイル名
git add .
```

> ``git commit -m "コメント"``コマンドでローカルリポジトリへコミットを行います。

```bash
git commit -m "コメント1行目(概要)" -m "" -m "コメント3行目(詳細/理由)"
```

一般的な概要のコメント(英語)

* add : 機能やファイルの追加
* update : 機能の修正(リファクタリングを含む)
* fix : バグの修正
* remove : ファイルの削除

詳細に管理したい場合のコメント(英語)
* change : 仕様変更
* clean：リファクタリングなど
* upgrade : バージョンアップ
* revert : 変更取り消し

#### 2.1.4. ブランチの切り方と切り替え方
ブランチの作成は以下のコマンドで行います。(ブランチ名なしで現在のブランチを確認可能)
```
git branch ブランチ名
```

ブランチの移動は以下コマンドで行います。

```
git checkout ブランチ名

git switch ブランチ名
```

``git checkout``に``-b``を付けるとブランチ作成と切り替えをまとめて実行可能。

#### 2.1.5. リポジトリの状態の確認
```bash
git status
```


#### 2.1.6. コミットした履歴の確認
```bash
git log
```

| オプション | 詳細 |
| ---- | ---- |
| --oneline | 1行での表示 |
| -p ファイル名 | ファイル差分の表示 |
| -n 数字 | 表示数の制限表示 |


#### 2.1.7. ファイルの削除とステージングエリアへの追加
ファイル削除後に以下のコマンドを実行
```bash
git rm ファイル名
```

オプション``-r``をつけると完全削除


#### 2.1.8. ファイルの変更差分の確認
```
git diff 
```

#### 2.1.9. ファイルの状態を直前のバージョンに戻す
git addをする前の状態で戻す場合
```
git checkout .

git checkout ファイル名
```

git addをした後の状態で戻す場合
```
git reset --hard HEAD
```

git commitをした後に戻す場合(直前にcommitしたものも取り消す)
```
git reset --hard HEAD~
```

#### 2.1.10. ファイルを古いバージョンに戻す
1. ``git log``でCommit履歴を確認しIDを取得
2. ``git checkout <ID>``を行うことでIDのCommitバージョンに戻せる

戻したバージョン(以前のバージョン)の編集を行い、そこから最新バージョンにする場合のcommitは以下の通り。

```
git commit -a -m "<summary>" -m " " -m "<discription>"
```


### 2.2. リモートリポジトリを含めた作業フロー(GitHub)
#### 2.2.1. リモートリポジトリの作成
GitHubにブラウザからアクセスしてリモートリポジトリを用意する。


#### 2.2.2. リモートリポジトリへのプッシュ
初期設定は以下のコマンドを実行する。
```bash
git remote add origin "GitHubURL"
```

以下コマンドを実行する。(ローカルリポジトリのブランチ名はこの場合はmaster)
```bash
git push -u origin master
```


#### 2.2.3. リモートリポジトリからプル(ローカルへの反映)
```
git pull
```


#### 2.2.4. リモートリポジトリの確認と変更(上書き)方法
リモートリポジトリの確認は以下コマンドまたは``.git/config``で確認可能。

```
git remote -v
```

リモートリポジトリの変更は以下コマンドより
```
git remote set-url リモートレポジトリ名(masterなど) 新しいリモートリポジトリのURL
```


#### 2.2.5. リモートリポジトリの削除
rmで完全削除

```
git remote rm リモートレポジトリ名

```


#### 2.2.6. リモートリポジトリからのクローン
```
git clone リモートリポジトリのURL
```


### 2.3. その他のGitコマンド
| コマンド | 詳細 | オプション |
| ---- | ---- | ---- |
| git ls-files | Gitで管理しているファイル一覧の表示 |  |


## 3. .gitignoreに関して
.gitignoreではgitで管理したくないファイルを指定できます。
例えば以下のようなものです。
* 自動生成されるファイル
* パスワード・IDなどが記載されるファイル(.env)など

```gitignore
#拡張子ファイルを無視
.拡張子
#指定したファイルの除外
ファイル名
#ディレクトリ以下で除外(特定ファイルの無視)
フォルダ名/
```
