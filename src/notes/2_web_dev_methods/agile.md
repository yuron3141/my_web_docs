# アジャイル開発入門<!-- omit in toc -->

Web系の基本開発手法であるアジャイルに関するまとめ。個人開発もこのサイクルを採用する。

基本Webアプリ開発をする前提で記載。ゲーム系や他システムの開発を行う場合は適宜改変して利用する。

## 目次<!-- omit in toc -->
- [1. アジャイル開発とは](#1-アジャイル開発とは)
- [2. アジャイル開発手法の種類](#2-アジャイル開発手法の種類)
  - [2.1. スクラム](#21-スクラム)
  - [2.2. エクストリームプログラミング(XP)](#22-エクストリームプログラミングxp)
  - [2.3. ユーザ機能駆動開発(FDD)](#23-ユーザ機能駆動開発fdd)
- [3. アジャイルの開発哲学](#3-アジャイルの開発哲学)
  - [3.1. リーンソフトウェア開発(LSD)](#31-リーンソフトウェア開発lsd)
  - [3.2. 適応的ソフトウェア開発(ASD)](#32-適応的ソフトウェア開発asd)
- [4. 基本の開発サイクル](#4-基本の開発サイクル)
  - [4.1. 企画](#41-企画)
  - [4.2. 計画](#42-計画)
  - [4.3. 設計](#43-設計)
    - [4.3.1. 基本設計(外部設計)](#431-基本設計外部設計)
    - [4.3.2. 詳細設計(内部設計)](#432-詳細設計内部設計)
    - [4.3.3. 設計資料](#433-設計資料)
  - [4.4. 実装](#44-実装)
  - [4.5. テスト](#45-テスト)
    - [4.5.1. 単体テスト(ユニットテスト)](#451-単体テストユニットテスト)
    - [4.5.2. 結合テスト(インターフェーステスト)](#452-結合テストインターフェーステスト)
    - [4.5.3. 統合テスト](#453-統合テスト)
- [5. デプロイと保守/運営](#5-デプロイと保守運営)
  - [5.1. デプロイ](#51-デプロイ)
  - [5.2. 保守/運営](#52-保守運営)


# 1. アジャイル開発とは
アジャイル開発は**アプリ/システム開発を小さな単位に分け、実装とテストを繰り返し**ながら開発を行うもの。

# 2. アジャイル開発手法の種類
## 2.1. スクラム
チーム単位で開発を行う手法。

メンバー各自の役割を決めますが、明確なタスクや工程の振り分けは行われない。

メンバー自身がそれぞれ計画を立て進めるため、メンバー全員で責任を共有する。

スクラムマスター(リーダ)が内部の調整やインシデント管理を行い、他メンバーにもそれぞれ役割（ロール）を設定して開発する。

チーム主体の開発手法のため、コミュニケーションが重視となる。
メンバーのスキルをそれぞれが把握することにより、臨機応変かつ効率的な開発を実現可能。

## 2.2. エクストリームプログラミング(XP)
要件や仕様の変更に対して柔軟に対応するための手法。

エンジニアがペアを組み、コーディングをお互いにサポートしながら作業を行うペアプログラミングが基本となる。

エラーや仕様変更に対応しやすい点が強み。

エンジニアのスキルに依存しやすい手法であるため、未熟なエンジニアの場合、開発の効率が大きく低下してしまう場合がある。


## 2.3. ユーザ機能駆動開発(FDD)
ユーザーの目線から価値のある機能を選定し、その機能を中心に開発する手法。

発注側(システムのクライアント)にヒアリングを行い、必要な機能を適切な計画で開発する。
また、機能ごとにチームを編成して開発を行う。

価値が高い機能を実装しやすい手法だが、計画段階から発注側との入念なコミュニケーションが必要となる。

# 3. アジャイルの開発哲学
## 3.1. リーンソフトウェア開発(LSD)
無駄を省いて品質の高い開発を行うことを重視する。
名前はリーン生産方式に由来。
以下の7つの原則に当てはまるもの。

<img src="https://www.galk-jp.com/wp-content/uploads/2022/05/Seven-Principles-of-Lean-Software-Development.jpg" width="80%">


## 3.2. 適応的ソフトウェア開発(ASD)
継続的な仕様変化に適応することを重視する。
複雑なシステムや状況変化の激しい場合に適した開発哲学。

説明は割愛

# 4. 基本の開発サイクル
アジャイル開発では以下フローで開発を行う。

1. 企画
2. 計画(サイクルの始まり)
3. 設計
4. 実装
5. テスト(サイクルの終わり)
6. デプロイ

2～5を繰り返してプロダクト(アプリ/システム)開発を行う。

## 4.1. 企画

どのようなアプリやサービスを開発するか決める。

企画で考慮すべき内容は以下の通り。

* 基本内容
  * どんなアプリ/サービスを作るのか明確にする
  * それがどのような価値/役割を提供する(何を解決する)を大まかにまとめる


* その他
  * Webアプリ/ソフトウェア開発の場合
    * ペルソナ(クライアントやユーザ)像を明確にする
    * 類似アプリやサービスがあればそれに関して調査する場合もある
  * ゲーム系の場合
    * 類似ゲームや元ネタ(世界感の構成材料)に関する調査
    * デザイン(ビジュアル)のガイドライン的なものを決める 
    * 提供する世界観(ゲームカラー)を決める

## 4.2. 計画
### 要件定義<!-- omit in toc -->
要件定義は初めに以下の項目を行う。

* 実装する機能の整理
  * 機能要件(実装機能一覧)を整理する
  * 非機能要件(UX, 性能, 拡張性, セキュリティなど)を整理する
* 技術選定 ・・・ アプリ/サービスの構築のために必要な技術を調査
  * 開発人員のバックボーンやスキル/意欲も踏まえる
  * 実装したい機能や特性も踏まえる
  * 開発期間や技術の学習コストも踏まえる
  * 非機能要件(UX, 性能, 拡張性, セキュリティなど)も踏まえる
* システムの構成(アーキテクチャ設計)を行う
* 開発人員の体制
  * PM(プロジェクトマネージャー)を決める
  * 開発人員が複数いる場合は担当や役割などを決める
* タスクの管理体制の確立
  * 開発ワークフローに用いるgitリポジトリの決定
  * 開発に関するドキュメント(機能/DB/API/コーディング規則などの書類)の管理や参照フローの決定
  * 開発する際のコミニケーションやり取りを行うツール(discord, slackなど)の決定

アジャイル開発では技術選定やアーキテクチャ設計は**初めの計画**で行うと良い。

機能要件を洗いざらい書きだした後はマイルストーン(開発サイクル)ごとに実装する。

一般的(組織やプロジェクトにおける)な全体における実装順序は以下の通り。(2,3は同時に進む場合もある?)
1. インフラストラクチャの構築
2. バックエンド(APIサーバ)の機能実装
3. フロントエンドの機能実装

個人開発のWebアプリでは「バックエンド」=>「フロントエンド」=>「インフラストラクチャ」の開発が無難である。

### サイクルにおける計画<!-- omit in toc -->
機能要件で決めた機能一覧から実装単位(1開発サイクルで実装する機能)を決めて実施する。

また後から必要になった機能もここで追加できるが、個人開発では**まず終わらせろ**。それからだ。

学習にかかる時間も考慮して1開発サイクルが終わるまでの完成予定日を決める。

## 4.3. 設計
### 4.3.1. 基本設計(外部設計)
基本設計では**実装機能のドキュメント**的なものを作成します。

* フロント/バック共通
  * 機能設計 … 機能や動作のリストアップ(機能一覧表など)
  * 方式設計 … フロント/バックエンド(DB含む)/インフラごとの技術選定
* バックエンド
  * データベース設計 … データベースのスキーマの設計(ER図, CRUD図など含む)
  * API設計 … 機能一覧からAPI設計(API仕様書など)
* フロントエンド
  * 画面設計 … ワイヤフレーム, 画面一覧, ディレクトリマップ, 画面遷移図等
* インフラストラクチャ
  * アーキテクチャ設計 … アーキテクチャ図など

### 4.3.2. 詳細設計(内部設計)
堅いシステム開発を行わない、**Web系の場合は基本設計に含めてしまうことが多い**。

一応記載する。


詳細設計とは、基本設計で決定した内容を基に、ユーザーからは見えないシステム内部の動作・機能を設計して、実際にプログラミングできる内容に詳しく落とし込む工程。

* **モジュール設計** ・・・ Webアプリの機能実装に必要なモジュールの選定や分割を細かく設計します
* **データ設計** ・・・ Webアプリのデータを保存するデータベースの選定・データ処理の流れ・データの保存場所などの細かい設計を行います
* **プログラム設計** ・・・ 設計した内容を実装できるように、プログラミング可能なレベルまで詳しく設計します。具体的には、実装内容・手順をドキュメントに直した設計書の作成等を行います

### 4.3.3. 設計資料
また設計にあたって作成する文書や図は以下のようなものがある。
Web系で基本的に使いそうなものには○がついてある。他は作るアプリやサービスによる。

|  図・文書  |  説明  | Web系 |
| ---- | ---- | ---- |
| 機能一覧表 | 開発する機能を一覧にまとめます。新規アプリケーション開発の場合は外部設計のベースとなります | ○ |
| 業務フロー図 | 要件定義フェーズで確定していない場合は外部設計として作成します | |
| 画面設計書 | ユーザーが操作する各画面の構成、及び画面遷移図を設計します | ○ |
| 帳票設計書 | 帳簿、伝票などの出力項目、レイアウト、出力タイミングなどを設計します |  |
| インターフェース設計書 | アプリケーションが外部とインターフェースする部分を設計します | △ |
| データベース設計書 | データを格納するテーブルを定義します。一般的にはER図を用います | ○ |
| 外部ファイル設計書 | 入出力するファイルのフォーマットを定義します |  |
| ハードウェアインターフェース設計書 | ハードウェアの制御方法を記載します |  |
| 他アプリケーションとの関連図 | 他アプリケーションとの関連、接続方法を記載します |  |
| セキュリティ設計 | 要件定義のセキュリティ要件に対する具体的な対応内容を記載します | △ |

#### 画面設計に関する資料<!-- omit in toc -->
これらはフロントエンド設計でほぼ必ず使うはず。

* ワイヤーフレーム(画面レイアウト) ・・・ webページのレイアウトを決める設計図
* 画面一覧表 ・・・ 各画面にどういう機能や文があるかをまとめて一覧にしたもの
* ディレクトリマップ ・・・ webサイトを構成するすべてのwebページの情報をまとめて、一覧にしたもの
* 画面遷移図(サイトマップ) ・・・ システムの画面遷移を図で表したもの

#### データベース設計に関する資料<!-- omit in toc -->
バックエンド開発におけるDB周りでは必須。

* テーブル定義書 ・・・ テーブルを作成するための定義書(最悪ER図のみでもよい)
* ER図 ・・・ 実体と関係という概念を用いてデータ構造を図にしたもの
* CRUD図 ・・・ 「Create」「Read」「Update」「Delete」の操作がどのテーブルに対して行われているかを画面(機能やユースケース)ごとに記載したもの

## 4.4. 実装
設計が完了したあとは開発作業に入って実際にプログラミングを行う。

### Gitを用いたタスク管理<!-- omit in toc -->
Gitを用いた分散型開発の場合は基本的に以下の繰り返しで開発を進める。
1. タスクごとにブランチを作成
2. 何らかの機能や改修を実装
3. 単体テストや結合テストを実装
4. github上でプルリクエスト作成
5. レビューを受け修正
6. マージ7. 1に戻る

## 4.5. テスト
設計された内容を取りこぼし無く実装出来ているのかをテストする。
開発中のアプリをどういった方法でテストするか、どんなテストツールを使用するかを決める。

具体的には入力値のバリテーションチェックや複数の機能のユニットを連結した動作のチェックなどが含まれる。

### 4.5.1. 単体テスト(ユニットテスト)
実装されたコードが設計書に記載された通りにきちんと動くのか検証するテスト。
画面上に見える部分と裏側のデータ双方で、細かい部分の洗い出しが必要となる。

### 4.5.2. 結合テスト(インターフェーステスト)
結合テストとは、モジュール間の結合状態などについて確認するテスト。

### 4.5.3. 統合テスト
全てのモジュールを結合した最終テスト。

# 5. デプロイと保守/運営
## 5.1. デプロイ
構築されたインフラストラクチャへ開発したアプリをデプロイする。

個人開発の場合はインフラストラクチャの構築と学習はデプロイする場合に行うと良い。

## 5.2. 保守/運営
保守運営を行う。
